<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <link rel="preload" href="../../_theme/fonts/berkeley/BerkeleyMono-Regular.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="preload" href="../../_theme/fonts/berkeley/BerkeleyMono-Bold.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="preload" href="../../_theme/fonts/berkeley/BerkeleyMono-Italic.woff2" as="font" type="font/woff2" crossorigin="">
    

    <link rel="preload" href="../../_theme/fonts/berkeley/BerkeleyMono-Regular.woff" as="font" type="font/woff" crossorigin="">
    <link rel="preload" href="../../_theme/fonts/berkeley/BerkeleyMono-Bold.woff" as="font" type="font/woff" crossorigin="">
    <link rel="preload" href="../../_theme/fonts/berkeley/BerkeleyMono-Italic.woff" as="font" type="font/woff" crossorigin="">


    <link rel="preload" href="../../_theme/fonts/noto/NotoSans-Regular.ttf" as="font" type="font/ttf" crossorigin="">
    <link rel="preload" href="../../_theme/fonts/noto/NotoSans-Bold.ttf" as="font" type="font/ttf" crossorigin="">
    <link rel="preload" href="../../_theme/fonts/noto/NotoSans-Italic.ttf" as="font" type="font/ttf" crossorigin="">    

    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.3.361">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <meta name="description" content="How to use a CDP to borrow Auton in the Auton Stabilization Mechanism.">

    <title>Autonity Documentation - Open and manage a CDP</title>    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/fontawesome.min.css" integrity="sha512-SgaqKKxJDQ/tAUAAXzvxZz33rmn7leYDYfBP+YoMRSENhf3zJyx3SBASt/OfeQwBHA1nxMis7mM3EV/oYT6Fdw==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <style>
        code{white-space: pre-wrap;}
        span.smallcaps{font-variant: small-caps;}
        div.columns{display: flex; gap: min(4vw, 1.5em);}
        div.column{flex: auto; overflow-x: auto;}
        div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
        ul.task-list{list-style: none;}
        ul.task-list li input[type="checkbox"] {
          width: 0.8em;
          margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
          vertical-align: middle;
        }
        /* CSS for syntax highlighting */
        pre > code.sourceCode { white-space: pre; position: relative; }
        pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
        pre > code.sourceCode > span:empty { height: 1.2em; }
        .sourceCode { overflow: visible; }
        code.sourceCode > span { color: inherit; text-decoration: inherit; }
        div.sourceCode { margin: 1em 0; }
        pre.sourceCode { margin: 0; }
        @media screen {
        div.sourceCode { overflow: auto; }
        }
        @media print {
        pre > code.sourceCode { white-space: pre-wrap; }
        pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
        }
        pre.numberSource code
          { counter-reset: source-line 0; }
        pre.numberSource code > span
          { position: relative; left: -4em; counter-increment: source-line; }
        pre.numberSource code > span > a:first-child::before
          { content: counter(source-line);
            position: relative; left: -1em; text-align: right; vertical-align: baseline;
            border: none; display: inline-block;
            -webkit-touch-callout: none; -webkit-user-select: none;
            -khtml-user-select: none; -moz-user-select: none;
            -ms-user-select: none; user-select: none;
            padding: 0 4px; width: 4em;
          }
        pre.numberSource { margin-left: 3em;  padding-left: 4px; }
        div.sourceCode
          {   }
        @media screen {
        pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
        }
    </style>
    
<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../_assets/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
        <script id="quarto-search-options" type="application/json">{
          "location": "navbar",
          "copy-button": false,
          "collapse-after": 3,
          "panel-placement": "end",
          "type": "overlay",
          "limit": 20,
          "language": {
            "search-no-results-text": "No results",
            "search-matching-documents-text": "matching documents",
            "search-copy-link-title": "Copy link to search",
            "search-hide-matches-text": "Hide additional matches",
            "search-more-match-text": "more match in this document",
            "search-more-matches-text": "more matches in this document",
            "search-clear-button-title": "Clear",
            "search-detached-cancel-button-title": "Cancel",
            "search-submit-button-title": "Submit",
            "search-label": "Search"
          }
        }</script>
        <style>html{ scroll-behavior: smooth; }</style>
        <link rel="preconnect" href="https://plausible.io">
        <script defer="" data-domain="docs.autonity.org" src="https://plausible.io/js/plausible.js"></script>
        <script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script>
    
    
        <link rel="stylesheet" href="../../_assets/css/styles.css">
    </head>

<body class="nav-sidebar docked nav-fixed">

        <div id="quarto-search-results"></div>
          <header id="quarto-header" class="headroom fixed-top">
            <nav class="navbar navbar-expand-lg navbar-dark ">
              <div class="navbar-container container-fluid">
              <div class="navbar-brand-container">
            <a href="../../index.html" class="navbar-brand navbar-brand-logo">
            <img src="../../_assets/images/logo-autonity.svg" alt="" class="navbar-logo">
            </a>
            <a class="navbar-brand" href="../../index.html">
            <span class="navbar-title">Autonity Documentation</span>
            </a>
          </div>
                <div class="quarto-navbar-tools ms-auto">
        </div>
                  <div id="quarto-search" class="" title="Search"></div>
              </div> <!-- /container-fluid -->
            </nav>
          <nav class="quarto-secondary-nav">
            <div class="container-fluid d-flex">
              <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
                <i class="bi bi-layout-text-sidebar-reverse"></i>
              </button>
              <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../cdp/open-cdp/index.html">Borrowing by CDP in the ASM</a></li><li class="breadcrumb-item"><a href="../../cdp/open-cdp/index.html">Open and manage a CDP</a></li></ol></nav>
              <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
              </a>
            </div>
          </nav>
        </header>
        <!-- content -->
        <div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
        <!-- sidebar -->
          <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
            <div class="sidebar-menu-container"> 
            <ul class="list-unstyled mt-1">
                <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Getting started</span></a>
          </div>
        </li>
                <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../overview/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Overview</span></a>
          </div>
        </li>
                <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
         <span class="menu-text">Concepts</span></a>
                  <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/architecture/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Architecture</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/system-model/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">System model</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/consensus/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Consensus</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/client/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Autonity Go Client (AGC)</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/oracle-network/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Oracle network</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/oracle-server/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Autonity Oracle Server (AOS)</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/validator/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Validator</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/staking/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Staking</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/accountability/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Accountability and fault detection (AFD)</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/asm/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Auton Stabilization Mechanism (ASM)</span></a>
          </div>
        </li>
                  <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a href="../../concepts/protocol-assets/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Protocol assets</span></a>
                  <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/protocol-assets/newton/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Newton</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/protocol-assets/auton/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Auton</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../concepts/protocol-assets/liquid-newton/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Liquid Newton</span></a>
          </div>
        </li>
              </ul>
          </li>
              </ul>
          </li>
                <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
         <span class="menu-text">Networks</span></a>
                  <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../networks/testnet-bakerloo/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Bakerloo Testnet</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../networks/testnet-piccadilly/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Piccadilly Testnet</span></a>
          </div>
        </li>
              </ul>
          </li>
                <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
         <span class="menu-text">Accounts</span></a>
                  <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../account-holders/setup-aut/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Setup the Autonity Utility Tool (aut)</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../account-holders/create-acct/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Create an account</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../account-holders/fund-acct/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Fund an account</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../account-holders/submit-trans-aut/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Submit a transaction from the Autonity Utility tool (aut)</span></a>
          </div>
        </li>
              </ul>
          </li>
                <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
         <span class="menu-text">Running a Node</span></a>
                  <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../node-operators/install-aut/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Install Autonity in your environment</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../node-operators/run-aut/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Run Autonity</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../node-operators/connect/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Connecting to your Node</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../node-operators/setup-node-monitoring/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Set up node monitoring</span></a>
          </div>
        </li>
              </ul>
          </li>
                <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
         <span class="menu-text">Running an Oracle Server</span></a>
                  <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../oracle/install-oracle/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Install Autonity Oracle Server in your environment</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../oracle/run-oracle/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Run Autonity Oracle Server</span></a>
          </div>
        </li>
              </ul>
          </li>
                <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
         <span class="menu-text">Running a Validator</span></a>
                  <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../validators/register-vali/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Register as a Validator</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../validators/pause-vali/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Pause and reactivate a Validator</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../validators/change-commission-rate/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Change Validator Commission Rate</span></a>
          </div>
        </li>
              </ul>
          </li>
                <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
         <span class="menu-text">Staking</span></a>
                  <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../delegators/bond-stake/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Bond and unbond stake</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../delegators/claim-rewards/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Claim Staking Rewards</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../delegators/transfer-lntn/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Transfer Liquid Newton</span></a>
          </div>
        </li>
              </ul>
          </li>
                <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
         <span class="menu-text">Borrowing by CDP in the ASM</span></a>
                  <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../cdp/open-cdp/index.html" class="sidebar-item-text sidebar-link active">
         <span class="menu-text">Open and manage a CDP</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../cdp/liquidate-cdp/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Liquidate a CDP</span></a>
          </div>
        </li>
              </ul>
          </li>
                <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
         <span class="menu-text">Development</span></a>
                  <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../developer/submit-trans-gov-acct/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Submit a governance transaction from Autonity Utility Tool (aut)</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../developer/deploy-brownie/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Deploy smart contracts to an Autonity network with Brownie</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../developer/custom-networks/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Setting up custom networks</span></a>
          </div>
        </li>
              </ul>
          </li>
                <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
         <span class="menu-text">Reference</span></a>
                  <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
                  <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a href="../../reference/cli/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Autonity Command-line</span></a>
                  <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth2 ">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/cli/agc/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Autonity Go Client Command-line</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/cli/oracle/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Autonity Oracle Server Command-line</span></a>
          </div>
        </li>
              </ul>
          </li>
                  <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a href="../../reference/api/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Autonity Interfaces</span></a>
                  <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth2 ">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/api/accountability/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Accountability Contract Interface</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/api/oracle/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Oracle Contract Interface</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/api/liquid-newton/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Liquid Newton Contract Interface</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/api/web3/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Web3 Namespace</span></a>
          </div>
        </li>
                  <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a href="../../reference/api/aut/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Autonity Contract Interface</span></a>
                  <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" aria-expanded="false" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth3 ">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/api/aut/op-prot/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Governance and Protocol Only Reference</span></a>
          </div>
        </li>
              </ul>
          </li>
                  <li class="sidebar-item sidebar-item-section">
              <div class="sidebar-item-container"> 
                    <a href="../../reference/api/asm/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">ASM Contract Interface</span></a>
                  <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" aria-expanded="false" aria-label="Toggle section">
                    <i class="bi bi-chevron-right ms-2"></i>
                  </a> 
              </div>
              <ul id="quarto-sidebar-section-15" class="collapse list-unstyled sidebar-section depth3 ">  
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/api/asm/stabilization/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Stabilization Contract Interface</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/api/asm/acu/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">ACU Contract Interface</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/api/asm/supplycontrol/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Supply Control Contract Interface</span></a>
          </div>
        </li>
              </ul>
          </li>
              </ul>
          </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/codebase/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Codebase</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/genesis/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Genesis</span></a>
          </div>
        </li>
                  <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../reference/protocol/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Protocol Parameters</span></a>
          </div>
        </li>
              </ul>
          </li>
                <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../glossary/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Glossary</span></a>
          </div>
        </li>
                <li class="sidebar-item">
          <div class="sidebar-item-container"> 
          <a href="../../issues/index.html" class="sidebar-item-text sidebar-link">
         <span class="menu-text">Known issues</span></a>
          </div>
        </li>
            </ul>
            </div>
        </nav>
        <div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
        <!-- margin-sidebar -->
            <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
                <nav id="TOC" role="doc-toc" class="toc-active">
            <h2 id="toc-title">On this page</h2>
           
          <ul>
          <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link active" data-scroll-target="#prerequisites">Prerequisites</a></li>
          <li><a href="#determine-borrowing-limit" id="toc-determine-borrowing-limit" class="nav-link" data-scroll-target="#determine-borrowing-limit">Determine borrowing limit</a>
          <ul class="collapse">
          <li><a href="#step-1.-get-collateral-price" id="toc-step-1.-get-collateral-price" class="nav-link" data-scroll-target="#step-1.-get-collateral-price">Step 1. Get collateral price</a></li>
          <li><a href="#step-2.-get-borrowing-ceiling" id="toc-step-2.-get-borrowing-ceiling" class="nav-link" data-scroll-target="#step-2.-get-borrowing-ceiling">Step 2. Get borrowing ceiling</a></li>
          <li><a href="#step-3.-calculate-borrowing-interest" id="toc-step-3.-calculate-borrowing-interest" class="nav-link" data-scroll-target="#step-3.-calculate-borrowing-interest">Step 3. Calculate borrowing interest</a></li>
          <li><a href="#step-4.-determine-collateral-requirements" id="toc-step-4.-determine-collateral-requirements" class="nav-link" data-scroll-target="#step-4.-determine-collateral-requirements">Step 4. Determine collateral requirements</a></li>
          </ul></li>
          <li><a href="#approve-the-stabilization-contract-as-a-collateral-token-spender" id="toc-approve-the-stabilization-contract-as-a-collateral-token-spender" class="nav-link" data-scroll-target="#approve-the-stabilization-contract-as-a-collateral-token-spender">Approve the Stabilization Contract as a collateral token spender</a>
          <ul class="collapse">
          <li><a href="#step-1.-verify-your-collateral-token-balance" id="toc-step-1.-verify-your-collateral-token-balance" class="nav-link" data-scroll-target="#step-1.-verify-your-collateral-token-balance">Step 1. Verify your collateral token balance</a></li>
          <li><a href="#step-2.-approve-the-stabilization-contract" id="toc-step-2.-approve-the-stabilization-contract" class="nav-link" data-scroll-target="#step-2.-approve-the-stabilization-contract">Step 2. Approve the Stabilization Contract</a></li>
          </ul></li>
          <li><a href="#open-a-cdp" id="toc-open-a-cdp" class="nav-link" data-scroll-target="#open-a-cdp">Open a CDP</a></li>
          <li><a href="#deposit-collateral-token" id="toc-deposit-collateral-token" class="nav-link" data-scroll-target="#deposit-collateral-token">Deposit collateral token</a></li>
          <li><a href="#borrow-against-collateral" id="toc-borrow-against-collateral" class="nav-link" data-scroll-target="#borrow-against-collateral">Borrow against collateral</a></li>
          <li><a href="#manage-your-cdp" id="toc-manage-your-cdp" class="nav-link" data-scroll-target="#manage-your-cdp">Manage your CDP</a>
          <ul class="collapse">
          <li><a href="#get-current-cdp-debt-amount" id="toc-get-current-cdp-debt-amount" class="nav-link" data-scroll-target="#get-current-cdp-debt-amount">Get current CDP debt amount</a></li>
          <li><a href="#repay-borrowing" id="toc-repay-borrowing" class="nav-link" data-scroll-target="#repay-borrowing">Repay borrowing</a></li>
          <li><a href="#withdraw-collateral" id="toc-withdraw-collateral" class="nav-link" data-scroll-target="#withdraw-collateral">Withdraw collateral</a></li>
          </ul></li>
          </ul>
        </nav>
            </div>
        <!-- main -->
        <main class="content" id="quarto-document-content">
    
        <header id="title-block-header" class="quarto-title-block default">
        <div class="quarto-title">
        <h1 class="title">Open and manage a CDP</h1>
        </div>

        <div>
          <div class="description">
            <p>How to use a CDP to borrow Auton in the Auton Stabilization Mechanism.</p>
          </div>
        </div>


        <div class="quarto-title-meta">

            
          
            
          </div>
          

        </header>    
            
    <section id="prerequisites" class="level2">
    <h2 class="anchored" data-anchor-id="prerequisites">Prerequisites</h2>
    <p>To open a CDP and borrow ATN you need:</p>
    <ul>
    <li><p>An <a href="../../account-holders//create-acct/">account</a> that has been <a href="../../account-holders/fund-acct/">funded</a> with:</p>
    <ul>
    <li>Auton: to pay for transaction gas costs</li>
    <li>Newton: to deposit as collateral token in the CDP.</li>
    </ul>
    <p>Note that this account address will be also be used as the <a href="../../concepts/asm/#cdp-identifiers">CDP identifier</a> account address as well as the <a href="../../concepts/asm/#roles">CDP Owner</a> address used to open and service the CDP.</p></li>
    <li><p>A running instance of <a href="https://github.com/autonity/aut"><code>aut</code></a> configured to <a href="../../account-holders/submit-trans-aut/">submit a transaction from your account</a>.</p></li>
    </ul>
    <div class="callout callout-style-default callout-note callout-titled" title="Protocol contract calls">
    <div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
    <div class="callout-icon-container">
    <i class="callout-icon"></i>
    </div>
    <div class="callout-title-container flex-fill">
    Protocol contract calls
    </div>
    <div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
    </div>
    <div id="callout-1" class="callout-1-contents callout-collapse collapse show">
    <div class="callout-body-container callout-body">
    <p>The guide uses the <code>aut contract call</code> and <code>aut contract tx</code> commands for contract interactions.</p>
    <p><code>aut contract</code> usage requires that you specify the <a href="../../glossary/#application-binary-interface-abi">ABI</a> file and the protocol contract address of the contract being called. To complete the guide you will need to call 2 protocol contracts:</p>
    <ul>
    <li>the Autonity Protocol Contract (<code>Autonity.abi</code>) with the protocol contract address <code>0xBd770416a3345F91E4B34576cb804a576fa48EB1</code></li>
    <li>the Stabilization Contract (<code>Stabilization.abi</code>) with the protocol contract address <code>0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f</code>.</li>
    </ul>
    <p>The <a href="../../reference/api/aut/">Autonity Protocol Contract Interfaces</a> is called to approve the Stabilization Contract as a spender of the CDP Owner’s NTN token. The primary interface for CDP interactions is the <a href="../../reference/api/asm/stabilization/">Stabilization Contract Interface</a>.</p>
    <p>The <code>abi</code> files are generated when building the client from source and can be found in your <code>autonity</code> installation directory at <code>./params/generated/Autonity.abi</code> and <code>./params/generated/Stabilization.abi</code>. Alternatively, you can generate the ABI using the <code>abigen</code> <code>cmd</code> utility if you built the utility when building from source (See <a href="../../node-operators/install-aut/#install-source">Install Autonity, Build from source code</a>).</p>
    <p>The guide explicitly sets the path to the ABI file and contract address to be clear which contract is being called. Note that the ABI file and contract address can be set as defaults in <code>aut</code>’s configuration file <code>.autrc</code> using the <code>contract_address</code> and <code>contract_abi</code> flags as appropriate:</p>
    <pre><code>#contract_abi = Autonity.abi
#contract_address = 0xBd770416a3345F91E4B34576cb804a576fa48EB1</code></pre>
    <p>or</p>
    <pre><code>contract_abi = Stabilization.abi
contract_address = 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f
</code></pre>
    <p>The guide assumes the ABI files are in the directory from which the <code>aut</code> command is run.</p>
    </div>
    </div>
    </div>
    </section>
    <section id="determine-borrowing-limit" class="level2">
    <h2 class="anchored" data-anchor-id="determine-borrowing-limit">Determine borrowing limit</h2>
    <p>As prerequisite to opening a CDP, verify your borrowing limit. This is done based on:</p>
    <ul>
    <li>collateral price</li>
    <li>amount of collateral to be deposited</li>
    <li>amount of interest to pay on the borrowing</li>
    </ul>
    <section id="step-1.-get-collateral-price" class="level3">
    <h3 class="anchored" data-anchor-id="step-1.-get-collateral-price">Step 1. Get collateral price</h3>
    <p>Query for current collateral price calling the <a href="../../reference/api/asm/stabilization/#collateralprice"><code>collateralPrice()</code></a> function of the Stabilization Contract using the <code>aut contract call</code> command:</p>
    <div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f collateralPrice</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>The current collateral price is returned denominated in <code>ton</code>, Autonity’s equivalent of <code>wei</code>. For example:</p>
    <div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">9990828200000000000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    </section>
    <section id="step-2.-get-borrowing-ceiling" class="level3">
    <h3 class="anchored" data-anchor-id="step-2.-get-borrowing-ceiling">Step 2. Get borrowing ceiling</h3>
    <p>Next, determine your borrowing limits. There are two ways to do this:</p>
    <ul>
    <li><a href="../../#minimum-collateral">By Auton borrowing amount</a>, to calculate the amount of collateral token that must be deposited to borrow a stated amount of Auton (ATN). Call <code>minimumCollateral()</code>.</li>
    <li><a href="../../#borrow-limit">By collateral token amount</a>, to calculate the amount of Auton that can be borrowed for a stated amount of collateral token (NTN). Call <code>borrowLimit()</code>.</li>
    </ul>
    <section id="minimum-collateral" class="level4">
    <h4 class="anchored" data-anchor-id="minimum-collateral">By amount of Auton to be borrowed</h4>
    <p>Determine how much collateral token (NTN) you will need to deposit for the amount of auton (ATN) you want to borrow.</p>
    <p>Query for the minimum collateral amount by calling the <a href="../../reference/api/asm/stabilization/#minimumcollateral"><code>minimumCollateral()</code></a> function of the Stabilization Contract using the <code>aut contract call</code> command. Pass in parameters for:</p>
    <ul>
    <li><code>&lt;PRINCIPAL&gt;</code> - the amount of ATN to borrow, specified in <code>ton</code>, Autonity’s equivalent of <code>wei</code></li>
    <li><code>&lt;PRICE&gt;</code> - set to the collateral price returned in <a href="../../cdp/open-cdp/#step-1-get-collateral-price">Step 1</a>.</li>
    <li><code>&lt;MCR&gt;</code> - the minimum collateralization ratio set for the ASM at genesis. Set to <code>2000000000000000000</code> (i.e.&nbsp;2). (For the default value set for <code>mcr</code> see <a href="../../reference/genesis/#configasmstabilization-object">Reference, Genesis, ASM stabilization config <code>minCollateralizationRatio</code></a>).</li>
    </ul>
    <div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f minimumCollateral <span class="op">&lt;</span>PRINCIPAL<span class="op">&gt;</span> <span class="op">&lt;</span>PRICE<span class="op">&gt;</span> <span class="op">&lt;</span>MCR<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>In this example 1.75 ATN is set as the principal</p>
    <div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f minimumCollateral 1750000000000000000 9990828200000000000 2000000000000000000</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>Returning:</p>
    <pre><code>350321307696993528</code></pre>
    <p>At the given collateral price, <code>0.350321307696993528</code> NTN must be deposited to borrow <code>1.75</code> ATN.</p>
    </section>
    <section id="borrow-limit" class="level4">
    <h4 class="anchored" data-anchor-id="borrow-limit">By amount of Newton collateral token deposited</h4>
    <p>Determine the maximum amount of Auton (ATN) that can be borrowed for a given amount of collateral token (NTN).</p>
    <p>Query for the borrowing limit by calling the <a href="../../reference/api/asm/stabilization/#borrowlimit"><code>borrowLimit()</code></a> function of the Stabilization Contract using the <code>aut contract call</code> command. Pass in parameters for:</p>
    <ul>
    <li><code>&lt;COLLATERAL&gt;</code> - the amount of collateral token deposited to back the debt</li>
    <li><code>&lt;PRICE&gt;</code> - the collateral token price. Set as for the preceding <a href="../../cdp/open-cdp/#minimum-collateral">example</a>.</li>
    <li><code>&lt;TARGETPRICE&gt;</code> - the <a href="../../concepts/asm/#acu">ACU</a> value of 1 unit of debt set for the ASM at genesis. Set to <code>1000000000000000000</code> (i.e.&nbsp;1). (For the default value set for <code>targetPrice</code> see <a href="../../reference/genesis/#configasmstabilization-object">Reference, Genesis, ASM stabilization config <code>minCollateralizationRatio</code></a>).</li>
    <li><code>&lt;MCR&gt;</code> - the minimum collateralization ratio. Set as for the preceding <a href="../../cdp/open-cdp/#minimum-collateral">example</a>.</li>
    </ul>
    <div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f borrowLimit <span class="op">&lt;</span>COLLATERAL<span class="op">&gt;</span> <span class="op">&lt;</span>PRICE<span class="op">&gt;</span> <span class="op">&lt;</span>TARGETPRICE<span class="op">&gt;</span> <span class="op">&lt;</span>MCR<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>In this example the <code>0.35...</code> NTN value returned by the other method is set as the collateral token amount.</p>
    <div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f borrowLimit 350321307696993528 9990828200000000000 1000000000000000000 2000000000000000000</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>Returning:</p>
    <pre><code>1749999999999999997</code></pre>
    <p>At the given collateral price, <code>1.749999999999999997</code> ATN can be borrowed for deposited collateral token of <code>0.350321307696993528</code> NTN.</p>
    </section>
    </section>
    <section id="step-3.-calculate-borrowing-interest" class="level3">
    <h3 class="anchored" data-anchor-id="step-3.-calculate-borrowing-interest">Step 3. Calculate borrowing interest</h3>
    <p>Determine the interest that will charged on the borrowed Auton over time.</p>
    <p>Query for the borrowing costs by calling the <a href="http://localhost:1313/reference/api/asm/stabilization/#interestdue"><code>interestDue()</code></a> function of the Stabilization Contract using the <code>aut contract call</code> command. Pass in parameters for:</p>
    <ul>
    <li><code>&lt;DEBT&gt;</code>: the amount of Auton you want to borrow</li>
    <li><code>&lt;RATE&gt;</code>: the borrow interest rate. For the default value set for <code>rate</code> see Reference, Genesis, <a href="../../reference/genesis/#configasmstabilization-object">ASM stabilization config</a>. Set to 5%, <code>50000000000000000</code></li>
    <li><code>&lt;TIMEBORROW&gt;</code>: the time point at which you will take out the borrowing. The timestamp is provided as a <a href="../../glossary/#unix-time">Unix time</a> value</li>
    <li><code>&lt;TIMEDUE&gt;</code>: the time point at which you will repay the borrowing, to specify the time point at which the interest is due. The timestamp is provided as a <a href="../../glossary/#unix-time">Unix time</a> value.</li>
    </ul>
    <div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f interestDue <span class="op">&lt;</span>DEBT<span class="op">&gt;</span> <span class="op">&lt;</span>RATE<span class="op">&gt;</span> <span class="op">&lt;</span>TIMEBORROW<span class="op">&gt;</span> <span class="op">&lt;</span>TIMEDUE<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>In this example interest for borrowing 1.75 ATN over the calendar month of October is requested.</p>
    <div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f interestDue 1750000000000000000 50000000000000000 1696114800 1698710400</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>Returning:</p>
    <div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">7216608464428718</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>Borrowing interest costs over the 31 day period are <code>7216608464428718</code> <a href="../../glossary/#ton"><code>ton</code></a>, or <code>0.007216608464428718</code> ATN.</p>
    </section>
    <section id="step-4.-determine-collateral-requirements" class="level3">
    <h3 class="anchored" data-anchor-id="step-4.-determine-collateral-requirements">Step 4. Determine collateral requirements</h3>
    <p>Finally, for ongoing management of your CDP you need to maintain a sufficient collateral buffer to manage the risk of the CDP entering a liquidatable state. Factors that could lead to a CDP becoming liquidatable include collateral withdrawals, increased principal borrowing, accrued interest increasing the debt, or collateral-to-Auton price fluctuation.</p>
    <div class="callout callout-style-default callout-note callout-titled" title="Note">
    <div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="true" aria-label="Toggle callout">
    <div class="callout-icon-container">
    <i class="callout-icon"></i>
    </div>
    <div class="callout-title-container flex-fill">
    Note
    </div>
    <div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
    </div>
    <div id="callout-2" class="callout-2-contents callout-collapse collapse show">
    <div class="callout-body-container callout-body">
    <p>If a debt position is under collateralized or not is determined by calculating <code>(collateral * price) / debt</code>. If this returns a value <code>&lt; liquidationRatio</code>, then the CDP is under collateralised and can be liquidated.</p>
    </div>
    </div>
    </div>
    <p>To mitigate this risk you can run different collateralization, debt, and price scenarios to simulate liquidation risk and determine how much collateral you post for your borrowing.</p>
    <p>To support this simulation you can use the <a href="../../reference/api/asm/stabilization/#undercollateralized"><code>underCollateralized()</code></a> function of the Stabilization Contract. Use the <code>aut contract call</code> command to do this, passing in parameters:</p>
    <ul>
    <li><code>&lt;COLLATERAL&gt;</code>: the amount of collateral backing the debt</li>
    <li><code>&lt;PRICE&gt;</code>: the price of the collateral in Auton. The actual price can be retrieved by calling <a href="../../reference/api/asm/stabilization/#collateralprice"><code>collateralPrice()</code></a>. For how to do this see <a href="../../cdp/open-cdp/#step-1-get-collateral-price">Step 1. Get collateral price</a>.</li>
    <li><code>&lt;DEBT&gt;</code>: the debt amount</li>
    <li><code>&lt;LIQUIDATIONRATIO&gt;</code>: the liquidation ratio set for the ASM at genesis. Set to <code>1800000000000000000</code> (i.e.&nbsp;1.8). (For the default value set for <code>liquidationRatio</code> see <a href="../../reference/genesis/#configasmstabilization-object">Reference, Genesis, ASM stabilization config <code>liquidationRatio</code></a>).</li>
    </ul>
    <div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f underCollateralized <span class="op">&lt;</span>COLLATERAL<span class="op">&gt;</span> <span class="op">&lt;</span>PRICE<span class="op">&gt;</span> <span class="op">&lt;</span>DEBT<span class="op">&gt;</span> <span class="op">&lt;</span>LIQUIDATIONRATIO<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>In this example, values for borrowing 1.75 ATN per other Steps in this example are used for the parameterisation:</p>
    <div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f underCollateralized 350321307696993528 9990828200000000000 1750000000000000000 1800000000000000000</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>Returning:</p>
    <div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>If the borrowing amount is increased from 1.75 to 1.95 ATN, then the position becomes under collateralized:</p>
    <div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f underCollateralized 350321307696993528 9990828200000000000 1950000000000000000 1800000000000000000</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>Returning:</p>
    <div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>However, if collateral is increased from <code>350321307696993528</code> to <code>352000000000000000</code>, then the position is no longer under collateralized:</p>
    <div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f underCollateralized 352000000000000000 9990828200000000000 1950000000000000000 1800000000000000000</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>Returning:</p>
    <div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">false</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    </section>
    </section>
    <section id="approve-the-stabilization-contract-as-a-collateral-token-spender" class="level2">
    <h2 class="anchored" data-anchor-id="approve-the-stabilization-contract-as-a-collateral-token-spender">Approve the Stabilization Contract as a collateral token spender</h2>
    <p>Before depositing collateral token to open a cdp, the collateral token contract must be called to approve the Stabilization Contract as a <code>spender</code> of collateral token using the standard ERC-20 “approve” method.</p>
    <!-- Note on Step 2 approve() and allowance().

    `aut contract tx` is being used instead of `aut token approve` because:

    - consistent use of one command group throughout the tutorial
    - `aut token allowance` returns the allowance granted by the owner to the caller...not to the spender. You can't call as the Stabilization Contract... `aut contract tx` allows you to specify the spender and owner.
    -->
    <section id="step-1.-verify-your-collateral-token-balance" class="level3">
    <h3 class="anchored" data-anchor-id="step-1.-verify-your-collateral-token-balance">Step 1. Verify your collateral token balance</h3>
    <p>(Optional.) Verify you have the necessary NTN balance for the desired borrowing:</p>
    <pre><code>aut account balance --ntn</code></pre>
    <p>The amount approved in Step 2 must be <code>&lt;=</code> to your NTN balance, otherwise the transaction will revert.</p>
    </section>
    <section id="step-2.-approve-the-stabilization-contract" class="level3">
    <h3 class="anchored" data-anchor-id="step-2.-approve-the-stabilization-contract">Step 2. Approve the Stabilization Contract</h3>
    <p>Approve the Stabilization Contract as a <code>spender</code> of collateral token. Call the Autonity Protocol Contract <a href="../../reference/api/aut/#approve"><code>approve()</code></a> function, using the <code>aut contract tx</code> command. Pass in parameters for:</p>
    <ul>
    <li><code>&lt;SPENDER&gt;</code> is the Stabilization Contract address</li>
    <li><code>&lt;AMOUNT&gt;</code> is the amount of NTN that you are allowing the contract to spend on your behalf.</li>
    </ul>
    <div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract tx <span class="at">--abi</span> Autonity.abi <span class="at">--address</span> 0xBd770416a3345F91E4B34576cb804a576fa48EB1 approve  <span class="op">&lt;</span>SPENDER<span class="op">&gt;</span> <span class="op">&lt;</span>AMOUNT<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>In this example, approval is given for <code>0.75</code> NTN:</p>
    <div class="sourceCode" id="cb23"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract tx <span class="at">--abi</span> Autonity.abi <span class="at">--address</span> 0xBd770416a3345F91E4B34576cb804a576fa48EB1 approve  0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f 750000000000000000 <span class="kw">|</span> <span class="ex">aut</span> tx sign <span class="at">-</span> <span class="kw">|</span> <span class="ex">aut</span> tx send <span class="at">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>Optionally, verify the Stabilization Contract approval has succeeded by calling the Autonity Protocol Contract <a href="../../reference/api/aut/#allowance"><code>allowance()</code></a> function, using the <code>aut contract call</code> command. Pass in parameters for:</p>
    <ul>
    <li><code>&lt;OWNER&gt;</code> is your account address</li>
    <li><code>&lt;SPENDER&gt;</code> is the Stabilization Contract address.</li>
    </ul>
    <div class="sourceCode" id="cb24"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Autonity.abi <span class="at">--address</span> 0xBd770416a3345F91E4B34576cb804a576fa48EB1 allowance <span class="op">&lt;</span>OWNER<span class="op">&gt;</span> <span class="op">&lt;</span>SPENDER<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>For example:</p>
    <div class="sourceCode" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Autonity.abi <span class="at">--address</span> 0xBd770416a3345F91E4B34576cb804a576fa48EB1 allowance 0xF47FDD88C8f6F80239E177386cC5AE3d6BCdEeEa 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="ex">750000000000000000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    </section>
    </section>
    <section id="open-a-cdp" class="level2">
    <h2 class="anchored" data-anchor-id="open-a-cdp">Open a CDP</h2>
    <p>It is only possible to have one CDP open at a time. This prevents users opening multiple CDP’s to borrow Auton without maintaining collateralization ratios.</p>
    <p>Open a CDP by depositing collateral token. Auton can then be borrowed against that collateral, creating the debt position. The debt of a CDP is then composed of:</p>
    <ul>
    <li><code>principal</code>: the amount of ATN borrowed, which must be above a minimum debt requirement</li>
    <li><code>accrued interest</code>: the borrowing interest rate charged to the debt, continuously compounding.</li>
    </ul>
    <p>(For the default values set for <code>borrowInterestRate</code> and <code>minDebtRequirement</code> see <a href="../../reference/genesis/#configasmstabilization-object">Reference, Genesis, ASM stabilization config</a>).</p>
    </section>
    <section id="deposit-collateral-token" class="level2">
    <h2 class="anchored" data-anchor-id="deposit-collateral-token">Deposit collateral token</h2>
    <p>Deposit collateral token (NTN) by submitting a transaction to the <a href="../../reference/api/asm/stabilization/#deposit"><code>deposit()</code></a> function of the Stabilization Contract using the <code>aut contract tx</code> command. Pass in parameters for:</p>
    <ul>
    <li><code>&lt;AMOUNT&gt;</code> - the amount of collateral token to deposit.</li>
    </ul>
    <div class="sourceCode" id="cb26"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract tx <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f deposit <span class="op">&lt;</span>AMOUNT<span class="op">&gt;</span> <span class="kw">|</span> <span class="ex">aut</span> tx sign <span class="at">-</span> <span class="kw">|</span> <span class="ex">aut</span> tx send <span class="at">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>In this example 0.75 NTN is deposited:</p>
    <div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract tx <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f deposit 750000000000000000 <span class="kw">|</span> <span class="ex">aut</span> tx sign <span class="at">-</span> <span class="kw">|</span> <span class="ex">aut</span> tx send <span class="at">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>Optionally, verify the deposit has succeeded and the CDP opened by calling the Stabilization Contract <a href="../../reference/api/asm/stabilization/#accounts"><code>accounts()</code></a> function to return an array of open CDP’s. The account address you used to submit the transaction will be included in the array of <a href="../../concepts/asm/#cdp-identifiers">CDP identifier</a> addresses returned.</p>
    <p>For example:</p>
    <div class="sourceCode" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f accounts</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[</span><span class="st">"0x1f790c60D974F5A8f88558CA90F743a71F009641"</span><span class="ex">,</span> <span class="st">"0xfd1ac0e99E9BD153F49080A96eb44843211E5C9f"</span>, <span class="st">"0xF47FDD88C8f6F80239E177386cC5AE3d6BCdEeEa"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    </section>
    <section id="borrow-against-collateral" class="level2">
    <h2 class="anchored" data-anchor-id="borrow-against-collateral">Borrow against collateral</h2>
    <p>Borrow Auton against deposited CDP collateral by submitting a transaction to the <a href="../../reference/api/asm/stabilization/#borrow"><code>borrow()</code></a> function of the Stabilization Contract using the <code>aut contract tx</code> command. Pass in parameters for:</p>
    <ul>
    <li><code>&lt;AMOUNT&gt;</code> - the amount of Auton to borrow.</li>
    </ul>
    <div class="sourceCode" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract tx <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f borrow <span class="op">&lt;</span>AMOUNT<span class="op">&gt;</span> <span class="kw">|</span> <span class="ex">aut</span> tx sign <span class="at">-</span> <span class="kw">|</span> <span class="ex">aut</span> tx send <span class="at">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>The borrowed Auton will be transferred to your account. To view your new ATN account balance run <code>aut account balance</code>.</p>
    <p>In this example 1.75 ATN is borrowed as the principal:</p>
    <div class="sourceCode" id="cb30"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract tx <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f borrow 1750000000000000000 <span class="kw">|</span> <span class="ex">aut</span> tx sign <span class="at">-</span> <span class="kw">|</span> <span class="ex">aut</span> tx send <span class="at">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    </section>
    <section id="manage-your-cdp" class="level2">
    <h2 class="anchored" data-anchor-id="manage-your-cdp">Manage your CDP</h2>
    <section id="get-current-cdp-debt-amount" class="level3">
    <h3 class="anchored" data-anchor-id="get-current-cdp-debt-amount">Get current CDP debt amount</h3>
    <p>The debt of a CDP consists of the Auton borrowed (the ‘principal’) and accrued interest due charged at the borrow interest rate.</p>
    <p>To determine the current debt owed on a CDP call <a href="../../reference/api/asm/stabilization/#debtamount"><code>debtAmount()</code></a>function of the Stabilization Contract using the <code>aut contract call</code> command.</p>
    <ol type="1">
    <li>Call <code>debtAmount()</code> passing in parameters for:</li>
    </ol>
    <ul>
    <li><code>&lt;ACCOUNT&gt;</code>: the CDP account address</li>
    <li><code>&lt;TIMESTAMP&gt;</code>: the timestamp at which you want to value the debt. The timestamp is provided as a <a href="../../glossary/#unix-time">Unix time</a> value.</li>
    </ul>
    <div class="sourceCode" id="cb31"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f debtAmount <span class="op">&lt;</span>ACCOUNT<span class="op">&gt;</span> <span class="op">&lt;</span>TIMESTAMP<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>The call will return the total amount owed on the CDP, <code>debt + accrued interest</code>. The result is returned as an integer value in <a href="../../glossary/#ton"><code>ton</code></a>, Autonity’s equivalent of Ethereum’s <code>wei</code>.</p>
    <p>In this example the debt amount is returned as <code>1.75...</code> ATN at time point October 17 2023 14:16:37 GMT:</p>
    <div class="sourceCode" id="cb32"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract call <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f debtAmount 0xF47FDD88C8f6F80239E177386cC5AE3d6BCdEeEa 1697552197</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="ex">1750217362321414404</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    </section>
    <section id="repay-borrowing" class="level3">
    <h3 class="anchored" data-anchor-id="repay-borrowing">Repay borrowing</h3>
    <p>Repay an amount of borrowed Auton by submitting a transaction to the <a href="../../reference/api/asm/stabilization/#repay"><code>repay()</code></a> function of the Stabilization Contract using the <code>aut contract tx</code> command. Pass in parameters for:</p>
    <ul>
    <li><code>&lt;AMOUNT&gt;</code> - the amount of Auton to repay to the CDP.</li>
    </ul>
    <div class="sourceCode" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract tx <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f <span class="at">--value</span> <span class="op">&lt;</span>AMOUNT<span class="op">&gt;</span> repay <span class="kw">|</span> <span class="ex">aut</span> tx sign <span class="at">-</span> <span class="kw">|</span> <span class="ex">aut</span> tx send <span class="at">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>In this example 0.25 ATN is repaid to reduce the principal:</p>
    <div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract tx <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f <span class="at">--value</span> 250000000000000000 repay <span class="kw">|</span> <span class="ex">aut</span> tx sign <span class="at">-</span> <span class="kw">|</span> <span class="ex">aut</span> tx send <span class="at">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <div class="callout callout-style-default callout-note callout-titled" title="Note">
    <div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="true" aria-label="Toggle callout">
    <div class="callout-icon-container">
    <i class="callout-icon"></i>
    </div>
    <div class="callout-title-container flex-fill">
    Note
    </div>
    <div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
    </div>
    <div id="callout-3" class="callout-3-contents callout-collapse collapse show">
    <div class="callout-body-container callout-body">
    <p>A repayment can be a partial or full repayment of the borrowed amount.</p>
    <p>If you want to repay all borrowed ATN in a CDP and clear the debt position completely, then slightly overpay - this covers accrued interest and the protocol will return any surplus payment to your account immediately.</p>
    <p>For example, you are repaying the entire debt and call <a href="http://localhost:1313/reference/api/asm/stabilization/#interestdue"><code>interestDue()</code></a> and <a href="../../reference/api/asm/stabilization/#debtamount"><code>debtAmount()</code></a> to determine the amount owed. You then make a repayment for that exact amount. In the time interval before the <a href="../../reference/api/asm/stabilization/#repay"><code>repay()</code></a> transaction is submitted a <code>dust</code> amount of interest can then accrue. In this scenario, overpayment will settle that interest due and surplus ATN from the repayment is returned.</p>
    </div>
    </div>
    </div>
    </section>
    <section id="withdraw-collateral" class="level3">
    <h3 class="anchored" data-anchor-id="withdraw-collateral">Withdraw collateral</h3>
    <p>Withdraw an amount of deposited collateral token by submitting a transaction to the <a href="../../reference/api/asm/stabilization/#withdraw"><code>withdraw()</code></a> function of the Stabilization Contract using the <code>aut contract tx</code> command. Pass in parameters for:</p>
    <ul>
    <li><code>&lt;AMOUNT&gt;</code> - the amount of Auton to repay to the CDP.</li>
    </ul>
    <div class="sourceCode" id="cb35"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract tx <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f withdraw <span class="op">&lt;</span>AMOUNT<span class="op">&gt;</span> <span class="kw">|</span> <span class="ex">aut</span> tx sign <span class="at">-</span> <span class="kw">|</span> <span class="ex">aut</span> tx send <span class="at">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    <p>In this example 0.1 NTN collateral token is withdrawn to reduce the deposited collateral amount:</p>
    <div class="sourceCode" id="cb36"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">aut</span> contract tx <span class="at">--abi</span> Stabilization.abi <span class="at">--address</span> 0x29b2440db4A256B0c1E6d3B4CDcaA68E2440A08f withdraw 100000000000000000 <span class="kw">|</span> <span class="ex">aut</span> tx sign <span class="at">-</span> <span class="kw">|</span> <span class="ex">aut</span> tx send <span class="at">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
    
    
    </section>
    </section>

        </main> <!-- /main -->
        <script id="quarto-html-after-body" type="application/javascript">
        window.document.addEventListener("DOMContentLoaded", function (event) {
          const toggleBodyColorMode = (bsSheetEl) => {
            const mode = bsSheetEl.getAttribute("data-mode");
            const bodyEl = window.document.querySelector("body");
            if (mode === "dark") {
              bodyEl.classList.add("quarto-dark");
              bodyEl.classList.remove("quarto-light");
            } else {
              bodyEl.classList.add("quarto-light");
              bodyEl.classList.remove("quarto-dark");
            }
          }
          const toggleBodyColorPrimary = () => {
            const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
            if (bsSheetEl) {
              toggleBodyColorMode(bsSheetEl);
            }
          }
          toggleBodyColorPrimary();  
          const icon = "";
          const anchorJS = new window.AnchorJS();
          anchorJS.options = {
            placement: 'right',
            icon: icon
          };
          anchorJS.add('.anchored');
          const isCodeAnnotation = (el) => {
            for (const clz of el.classList) {
              if (clz.startsWith('code-annotation-')) {                     
                return true;
              }
            }
            return false;
          }
          const clipboard = new window.ClipboardJS('.code-copy-button', {
            text: function(trigger) {
              const codeEl = trigger.previousElementSibling.cloneNode(true);
              for (const childEl of codeEl.children) {
                if (isCodeAnnotation(childEl)) {
                  childEl.remove();
                }
              }
              return codeEl.innerText;
            }
          });
          clipboard.on('success', function(e) {
            // button target
            const button = e.trigger;
            // don't keep focus
            button.blur();
            // flash "checked"
            button.classList.add('code-copy-button-checked');
            var currentTitle = button.getAttribute("title");
            button.setAttribute("title", "Copied!");
            let tooltip;
            if (window.bootstrap) {
              button.setAttribute("data-bs-toggle", "tooltip");
              button.setAttribute("data-bs-placement", "left");
              button.setAttribute("data-bs-title", "Copied!");
              tooltip = new bootstrap.Tooltip(button, 
                { trigger: "manual", 
                  customClass: "code-copy-button-tooltip",
                  offset: [0, -8]});
              tooltip.show();    
            }
            setTimeout(function() {
              if (tooltip) {
                tooltip.hide();
                button.removeAttribute("data-bs-title");
                button.removeAttribute("data-bs-toggle");
                button.removeAttribute("data-bs-placement");
              }
              button.setAttribute("title", currentTitle);
              button.classList.remove('code-copy-button-checked');
            }, 1000);
            // clear code selection
            e.clearSelection();
          });
          function tippyHover(el, contentFn) {
            const config = {
              allowHTML: true,
              content: contentFn,
              maxWidth: 500,
              delay: 100,
              arrow: false,
              appendTo: function(el) {
                  return el.parentElement;
              },
              interactive: true,
              interactiveBorder: 10,
              theme: 'quarto',
              placement: 'bottom-start'
            };
            window.tippy(el, config); 
          }
          const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
          for (var i=0; i<noterefs.length; i++) {
            const ref = noterefs[i];
            tippyHover(ref, function() {
              // use id or data attribute instead here
              let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
              try { href = new URL(href).hash; } catch {}
              const id = href.replace(/^#\/?/, "");
              const note = window.document.getElementById(id);
              return note.innerHTML;
            });
          }
              let selectedAnnoteEl;
              const selectorForAnnotation = ( cell, annotation) => {
                let cellAttr = 'data-code-cell="' + cell + '"';
                let lineAttr = 'data-code-annotation="' +  annotation + '"';
                const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
                return selector;
              }
              const selectCodeLines = (annoteEl) => {
                const doc = window.document;
                const targetCell = annoteEl.getAttribute("data-target-cell");
                const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
                const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                const lines = annoteSpan.getAttribute("data-code-lines").split(",");
                const lineIds = lines.map((line) => {
                  return targetCell + "-" + line;
                })
                let top = null;
                let height = null;
                let parent = null;
                if (lineIds.length > 0) {
                    //compute the position of the single el (top and bottom and make a div)
                    const el = window.document.getElementById(lineIds[0]);
                    top = el.offsetTop;
                    height = el.offsetHeight;
                    parent = el.parentElement.parentElement;
                  if (lineIds.length > 1) {
                    const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                    const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                    height = bottom - top;
                  }
                  if (top !== null && height !== null && parent !== null) {
                    // cook up a div (if necessary) and position it 
                    let div = window.document.getElementById("code-annotation-line-highlight");
                    if (div === null) {
                      div = window.document.createElement("div");
                      div.setAttribute("id", "code-annotation-line-highlight");
                      div.style.position = 'absolute';
                      parent.appendChild(div);
                    }
                    div.style.top = top - 2 + "px";
                    div.style.height = height + 4 + "px";
                    let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                    if (gutterDiv === null) {
                      gutterDiv = window.document.createElement("div");
                      gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                      gutterDiv.style.position = 'absolute';
                      const codeCell = window.document.getElementById(targetCell);
                      const gutter = codeCell.querySelector('.code-annotation-gutter');
                      gutter.appendChild(gutterDiv);
                    }
                    gutterDiv.style.top = top - 2 + "px";
                    gutterDiv.style.height = height + 4 + "px";
                  }
                  selectedAnnoteEl = annoteEl;
                }
              };
              const unselectCodeLines = () => {
                const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
                elementsIds.forEach((elId) => {
                  const div = window.document.getElementById(elId);
                  if (div) {
                    div.remove();
                  }
                });
                selectedAnnoteEl = undefined;
              };
              // Attach click handler to the DT
              const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
              for (const annoteDlNode of annoteDls) {
                annoteDlNode.addEventListener('click', (event) => {
                  const clickedEl = event.target;
                  if (clickedEl !== selectedAnnoteEl) {
                    unselectCodeLines();
                    const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
                    if (activeEl) {
                      activeEl.classList.remove('code-annotation-active');
                    }
                    selectCodeLines(clickedEl);
                    clickedEl.classList.add('code-annotation-active');
                  } else {
                    // Unselect the line
                    unselectCodeLines();
                    clickedEl.classList.remove('code-annotation-active');
                  }
                });
              }
          const findCites = (el) => {
            const parentEl = el.parentElement;
            if (parentEl) {
              const cites = parentEl.dataset.cites;
              if (cites) {
                return {
                  el,
                  cites: cites.split(' ')
                };
              } else {
                return findCites(el.parentElement)
              }
            } else {
              return undefined;
            }
          };
          var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
          for (var i=0; i<bibliorefs.length; i++) {
            const ref = bibliorefs[i];
            const citeInfo = findCites(ref);
            if (citeInfo) {
              tippyHover(citeInfo.el, function() {
                var popup = window.document.createElement('div');
                citeInfo.cites.forEach(function(cite) {
                  var citeDiv = window.document.createElement('div');
                  citeDiv.classList.add('hanging-indent');
                  citeDiv.classList.add('csl-entry');
                  var biblioDiv = window.document.getElementById('ref-' + cite);
                  if (biblioDiv) {
                    citeDiv.innerHTML = biblioDiv.innerHTML;
                  }
                  popup.appendChild(citeDiv);
                });
                return popup.innerHTML;
              });
            }
          }
            var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
              var filterRegex = new RegExp("https:\/\/autonity\.github\.io\/docs\.autonity\.org\/");
            var isInternal = (href) => {
                return filterRegex.test(href) || localhostRegex.test(href);
            }
            // Inspect non-navigation links and adorn them if external
         	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
            for (var i=0; i<links.length; i++) {
              const link = links[i];
              if (!isInternal(link.href)) {
                  // target, if specified
                  link.setAttribute("target", "_blank");
                  // default icon
                  link.classList.add("external");
              }
            }
        });
        </script>
        </div> <!-- /content -->
        <footer class="footer">
          <div class="nav-footer">
            <div class="nav-footer-left">
              <ul class="footer-items list-unstyled">
            <li class="nav-item compact">
            <a class="nav-link" href="https://github.com/autonity/">
              <i class="bi bi-github" role="img">
        </i> 
            </a>
          </li>  
            <li class="nav-item compact">
            <a class="nav-link" href="https://twitter.com/autonity_">
              <i class="bi bi-twitter" role="img">
        </i> 
            </a>
          </li>  
            <li class="nav-item compact">
            <a class="nav-link" href="https://discord.com/invite/autonity">
              <i class="bi bi-discord" role="img">
        </i> 
            </a>
          </li>  
            <li class="nav-item compact">
            <a class="nav-link" href="https://www.youtube.com/channel/UCBMTGESIYJzXy-MfojATRqQ">
              <i class="bi bi-youtube" role="img">
        </i> 
            </a>
          </li>  
        </ul>
            </div>   
            <div class="nav-footer-center">
              &nbsp;
            </div>
            <div class="nav-footer-right">
              &nbsp;
            </div>
          </div>
        </footer>
    


<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>