
---
title: "Oracle Network"
linkTitle: "Oracle network"
weight: 4
description: >
  Autonity oracle network: the role of oracles, the functions they perform, and their lifecycle
---

## Overview

This section describes the oracle network, the role of validator as oracle, and the oracle protocol.

Validator nodes selected to the consensus committee must participate in the Oracle protocol and submit price reports for median aggregation in voting rounds.

Autonity provides consensus-computed median price data for selected currency pairs as an L1 platform feature. The submission of price data for aggregation and voting in an oracle protocol is a validator responsibility. As such, validator nodes form an oracle network. If selected to the consensus committee, these 'validator oracles' submit raw price data reports for the selected currency pairs on-chain, and, participate in an oracle protocol to agree an aggregated median price for those selected currency pairs in discrete voting rounds. As voting rounds complete, the aggregated median price data computed and provided by the Autonity network is updated. As the consensus committee changes, so does the set of 'validator oracles' to keep it in sync with the consensus committee.

In the oracle protocol a validator has responsibilities to:

- Source raw price data for selected currency pairs from one-or-more external data sources off-chain.
- Provide price data reports as input for the computation of aggregated median price data for currency pairs during oracle voting rounds.
- Vote for aggregated median price data for currency pairs during oracle [voting rounds](/glossary/#voting-round).
- Maintain the set of symbols for which raw price data is provided by the validator oracle, revising as required if the connected Autonity network updates its selected set of currency pairs.


### Oracle prerequisites   

To operate as a validator node the operator must operate Autonity [oracle server](/concepts/oracle/) software as an adjunct to its Autonity [full node](/concepts/client/) software.

Prerequisites for participating in the oracle network as a validator node operator are:

- An Autonity Go Client full node installation, joined to an Autonity network.
- An Autonity Oracle Server installation, configured to connect to your full node installation and external data source providers via plugin adaptors.
- Plugin adaptors for connecting to external data provider sources to retrieve price data for the currency pairs required for your node's connected Autonity network.


## Oracle protocol

### Median price computation

The Autonity Oracle Contract manages the computation of median price data for currency pair price reports submitted by validator-operated oracle servers. 


### Voting rounds

Oracle voters
Voting Rounds

### Voter selection

By oracle protocol
In sync with consensus committee changes

### Commit and reveal

Commit and reveal protocol

### Currency pair management
Set at genesis config
Symbols - get, current
Symbols - set, change
Symbols - when change applied

## Oracle identity, accounts and keypairs
The oracle server makes use of a single account and private/public [key pair](/glossary/#key-pair) for oracle identity, oracle protocol participation, and cryptographic security. 

### Oracle server key

The private/public key pair of the oracle server node.

The private key is used:

- By an oracle server for submitting price report transactions to the Oracle Contract on-chain.
- To generate the `proof` of enode ownership required for validator registration. The `proof` is generated using the [`genOwnershipProof`](/reference/cli/agc/#command-line-options) command-line option of the Autonity Go Client. 

The public key is used:

- To derive an ethereum format account that is then used to identify the oracle server. See [oracle identifier](#oracle-identifier).

### Oracle identifier

A unique identifier for the Autonity Oracle Server used:

- as the oracle identity in validator registration, where it is provided as an  `oracleAddress` parameter
- as the `msg.Sender` address used by the oracle server to submit transactions for oracle price report submissions by function call to the Oracle Contract on-chain.

The identity is created as an ethereum format account address, generated by the entity operating the oracle server as part of the deployment process. It provides an unambiguous relationship between oracle server identity and the associated validator node for which the oracle server is a data provider.

The identifier may be referred to as the `oracle` account.

{{< alert title="Note" >}}
The oracle identifier is stored in the `oracleAddress` field in the Validator data struct maintained in state.

Note that this identifier is the _oracle server's_ on-chain identity and is distinct from the `nodeAddress` which is the validator node identifier, and the `treasury` account which is the validator _operator's_ account.
{{< /alert >}}

## Oracle lifecycle

### 

## Oracle economics

### Transaction fee refund

Oracle transactions are refunded if successful. The balance of the oracle account is required to be funded to cover at least one voting transaction.

## Oracle registration

A proof of ownership for the oracle account is required when submitting a registration transaction to the Autonity Contract.


### Genesis registration

### Post-genesis registration


